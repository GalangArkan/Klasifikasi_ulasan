{% extends "base.html" %}
{% block content %}

<div class="container mt-4 fade-in">  <!-- ðŸ”” Flash Message (otomatis hilang) -->{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }} alert-dismissible fade show mt-3" role="alert">
{{ message }}
<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
{% endif %}
{% endwith %}

  <h2 class="fw-bold text-center mb-4 text-danger">ðŸ“Š Dashboard Analisis Ulasan</h2>  <div class="row mb-4 text-center">
    <div class="col-md-8 mx-auto">
      <p class="lead">
        Sistem ini membantu mendeteksi apakah sebuah ulasan bersifat <strong>asli</strong> atau <strong>palsu</strong>
        menggunakan tiga algoritma <em>Machine Learning</em> â€” Naive Bayes, Logistic Regression, dan Decision Tree.
      </p>
      <img src="https://cdn-icons-png.flaticon.com/512/6399/6399520.png" width="220" class="mt-3 animated" alt="review illustration">
    </div>
  </div>  <!-- Statistik -->  <div class="row text-center">
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 stat-card fade-in" style="animation-delay:0.1s;">
        <div class="card-body">
          <h5 class="text-muted">Total Analisis</h5>
          <h2 class="text-danger fw-bold">{{ total }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 stat-card fade-in" style="animation-delay:0.2s;">
        <div class="card-body">
          <h5 class="text-muted">Ulasan Asli</h5>
          <h2 class="text-success fw-bold">{{ asli }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm border-0 stat-card fade-in" style="animation-delay:0.3s;">
        <div class="card-body">
          <h5 class="text-muted">Ulasan Palsu</h5>
          <h2 class="text-warning fw-bold">{{ palsu }}</h2>
        </div>
      </div>
    </div>
  </div>  <!-- Tombol Aksi -->  <div class="text-center mt-4">
    <a href="{{ url_for('analyze') }}" class="btn btn-warning btn-lg shadow-lg me-2">
      ðŸš€ Mulai Analisis Sekarang
    </a>
    <a href="{{ url_for('scrape_tokopedia') }}" class="btn btn-success btn-lg shadow-lg">
      <i class="fas fa-cloud-download-alt"></i> Ambil Data Tokopedia
    </a>
  </div>  <hr class="my-5">  <!-- Grafik -->  <div class="row mb-5 fade-in" style="animation-delay:0.4s;">
    <div class="col-md-6 mx-auto text-center">
      <h4 class="fw-bold text-danger mb-3">ðŸ“ˆ Persentase Ulasan</h4>
      <canvas id="reviewChart"></canvas>
    </div>
  </div>  <!-- Penjelasan -->  <div class="row">
    <div class="col-md-6 fade-in" style="animation-delay:0.5s;">
      <h4 class="fw-bold text-danger mb-3">ðŸ§© Apa Itu Ulasan Palsu?</h4>
      <p>
        Ulasan palsu adalah komentar atau testimoni yang sengaja dibuat untuk menipu pembeli lain.
        Biasanya dibuat oleh penjual untuk menaikkan rating produk, atau oleh kompetitor untuk menjatuhkan reputasi.
      </p>
      <ul>
        <li>Biasanya terlalu positif atau negatif tanpa alasan logis</li>
        <li>Sering menggunakan kata promosi berlebihan</li>
        <li>Terkadang tidak relevan dengan produk</li>
      </ul>
    </div>
    <div class="col-md-6 text-center fade-in" style="animation-delay:0.6s;">
      <img src="https://cdn-icons-png.flaticon.com/512/8736/8736977.png" width="250" alt="fake review">
    </div>
  </div>  <div class="alert alert-info mt-5 fade-in" style="animation-delay:0.7s;">
    ðŸ’¡ <strong>Fakta:</strong> Lebih dari <b>35%</b> ulasan produk online diduga tidak autentik menurut laporan konsumen global (2024).
  </div></div><!-- Chart --><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>
  const ctx = document.getElementById('reviewChart').getContext('2d');
  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Ulasan Asli', 'Ulasan Palsu'],
      datasets: [{
        data: [{{ asli }}, {{ palsu }}],
        backgroundColor: ['#28a745', '#ffc107'],
        borderWidth: 2,
        hoverOffset: 15
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: 'bottom' } },
      animation: { animateRotate: true, animateScale: true }
    }
  });

  // ðŸ”§ Auto-hide alert agar tidak menumpuk
  document.addEventListener("DOMContentLoaded", () => {
    const alerts = document.querySelectorAll(".alert");
    alerts.forEach(alert => {
      setTimeout(() => {
        const fade = new bootstrap.Alert(alert);
        fade.close();
      }, 4000);
    });
  });
</script><style>
  .fade-in { opacity: 0; transform: translateY(15px); animation: fadeInUp 0.8s ease forwards; }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px);} to { opacity: 1; transform: translateY(0);} }
  .animated { animation: float 3s ease-in-out infinite; }
  @keyframes float { 0%, 100% { transform: translateY(0);} 50% { transform: translateY(-10px);} }
</style>{% endblock %}